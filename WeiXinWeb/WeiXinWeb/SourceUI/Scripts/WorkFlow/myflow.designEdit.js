var oProcessAdd = {
    //弹出窗口对象定义
    openDialog: null,
    //责任人Json或抄送人对象
    bandccModuleJsonData: null,
    //流程模板流程表单Json对象
    pFormModuleJsonData: null,
    pKindModuleJsonData:null,
    rootCtrlID: "ProcessDesignEdit",
    getRootCtrl: function () {
        return $("#" + this.rootCtrlID);
    },
    getCtrl: function (ctrlID) {
        if (typeof (ctrlID) == "undefined" || ctrlID == undefined) {
            return null;
        }
        return this.getRootCtrl().find("#" + ctrlID);
    },
    getTicket: function () {
        if (oProcessAdd.getCtrl("__ticket").length > 0) {
            return oProcessAdd.getCtrl("__ticket").val();
        }
        return "";
    },
    getProcessGuid: function () {
        if (oProcessAdd.getCtrl("__processGuid").length > 0) {
            return oProcessAdd.getCtrl("__processGuid").val();
        }
        return "";
    },
    //配置控件
    configControl: function () {

    },
    setControlAttr: function () {
        //设置界面属性
    },
    setFormDefaultValue: function () {
        //设置界面的默认值
    },
    initProcessModuleJson: function() {
        
        $('#myflow')
                 .myflow(
                 {
                     basePath: "",
                     restore: eval("({states:{rect1:{type:'start',text:{text:'发起'}, attr:{ x:409, y:10, width:50, height:50}, props:{text:{name:'text',label:'步骤名称',value:'开始',textType:'basicInfo',textTypeDes:'基本信息'},stepType:{name:'stepType',label:'步骤类型',value:'开始',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'表单对象'},auditor:{name:'auditor',label:'责任人',value:'',bandGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},ccModule:{name:'ccModule',label:'抄送人',value:'',ccGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'}}},rect2:{type:'task_single',text:{text:'任务1'}, attr:{ x:386, y:116, width:100, height:50}, props:{text:{name:'text',label:'步骤名称',value:'任务1',textType:'basicInfo',textTypeDes:'基本信息'},stepType:{name:'stepType',label:'步骤类型',value:'单人审批',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'表单对象'},auditor:{name:'auditor',label:'责任人',value:'',bandGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},overpassday:{name:'overpassday',label:'超时时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},desc:{name:'desc',label:'自动完成时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},ccModule:{name:'ccModule',label:'抄送人',value:'',ccGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},candocmodify:{name:'candocmodify',label:'允许协商',value:'',textType:'stepInfo',textTypeDes:'功能属性'},canrollback:{name:'canrollback',label:'允许打回',value:'',textType:'stepInfo',textTypeDes:'功能属性'},cancancel:{name:'cancancel',label:'允许作废',value:'',textType:'stepInfo',textTypeDes:'功能属性'},candocnumber:{name:'candocnumber',label:'允许直接归档',value:'',textType:'stepInfo',textTypeDes:'功能属性'}}},rect3:{type:'fork',text:{text:'分支'}, attr:{ x:410, y:209, width:50, height:50}, props:{text:{name:'text',label:'显示',value:'分支',textType:'basicInfo'},temp1:{name:'temp1',label:'文本',value:'',textType:'basicInfo'},temp2:{name:'temp2',label:'选择',value:'',textType:'personInfo'}}},rect4:{type:'task_single',text:{text:'任务2'}, attr:{ x:192, y:317, width:100, height:50}, props:{text:{name:'text',label:'步骤名称',value:'任务2',textType:'basicInfo',textTypeDes:'基本信息'},stepType:{name:'stepType',label:'步骤类型',value:'单人审批',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'表单对象'},auditor:{name:'auditor',label:'责任人',value:'',bandGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},overpassday:{name:'overpassday',label:'超时时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},desc:{name:'desc',label:'自动完成时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},ccModule:{name:'ccModule',label:'抄送人',value:'',ccGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},candocmodify:{name:'candocmodify',label:'允许协商',value:'',textType:'stepInfo',textTypeDes:'功能属性'},canrollback:{name:'canrollback',label:'允许打回',value:'',textType:'stepInfo',textTypeDes:'功能属性'},cancancel:{name:'cancancel',label:'允许作废',value:'',textType:'stepInfo',textTypeDes:'功能属性'},candocnumber:{name:'candocnumber',label:'允许直接归档',value:'',textType:'stepInfo',textTypeDes:'功能属性'}}},rect5:{type:'task_single',text:{text:'任务3'}, attr:{ x:385, y:317, width:100, height:50}, props:{text:{name:'text',label:'步骤名称',value:'任务3',textType:'basicInfo',textTypeDes:'基本信息'},stepType:{name:'stepType',label:'步骤类型',value:'单人审批',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'表单对象'},auditor:{name:'auditor',label:'责任人',value:'',bandGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},overpassday:{name:'overpassday',label:'超时时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},desc:{name:'desc',label:'自动完成时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},ccModule:{name:'ccModule',label:'抄送人',value:'',ccGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},candocmodify:{name:'candocmodify',label:'允许协商',value:'',textType:'stepInfo',textTypeDes:'功能属性'},canrollback:{name:'canrollback',label:'允许打回',value:'',textType:'stepInfo',textTypeDes:'功能属性'},cancancel:{name:'cancancel',label:'允许作废',value:'',textType:'stepInfo',textTypeDes:'功能属性'},candocnumber:{name:'candocnumber',label:'允许直接归档',value:'',textType:'stepInfo',textTypeDes:'功能属性'}}},rect6:{type:'task_single',text:{text:'任务4'}, attr:{ x:556, y:320, width:100, height:50}, props:{text:{name:'text',label:'步骤名称',value:'任务4',textType:'basicInfo',textTypeDes:'基本信息'},stepType:{name:'stepType',label:'步骤类型',value:'单人审批',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'表单对象'},auditor:{name:'auditor',label:'责任人',value:'',bandGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},overpassday:{name:'overpassday',label:'超时时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},desc:{name:'desc',label:'自动完成时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},ccModule:{name:'ccModule',label:'抄送人',value:'',ccGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},candocmodify:{name:'candocmodify',label:'允许协商',value:'',textType:'stepInfo',textTypeDes:'功能属性'},canrollback:{name:'canrollback',label:'允许打回',value:'',textType:'stepInfo',textTypeDes:'功能属性'},cancancel:{name:'cancancel',label:'允许作废',value:'',textType:'stepInfo',textTypeDes:'功能属性'},candocnumber:{name:'candocnumber',label:'允许直接归档',value:'',textType:'stepInfo',textTypeDes:'功能属性'}}},rect7:{type:'join',text:{text:'合并'}, attr:{ x:410, y:416, width:50, height:50}, props:{text:{name:'text',label:'显示',value:'合并'},temp1:{name:'temp1',label:'文本',value:''},temp2:{name:'temp2',label:'选择',value:''}}},rect8:{type:'end',text:{text:'结束'}, attr:{ x:409, y:633, width:50, height:50}, props:{text:{name:'text',label:'步骤名称',value:'结束',textType:'basicInfo',textTypeDes:'基本信息'},stepType:{name:'stepType',label:'步骤类型',value:'结束',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'表单对象'},auditor:{name:'auditor',label:'责任人',value:'',bandGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},ccModule:{name:'ccModule',label:'抄送人',value:'',ccGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},overpassday:{name:'overpassday',label:'超时时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},candocmodify:{name:'candocmodify',label:'允许协商',value:'',textType:'functionInfo',textTypeDes:'功能属性'},canrollback:{name:'canrollback',label:'允许打回',value:'',textType:'functionInfo',textTypeDes:'功能属性'},cancancel:{name:'cancancel',label:'允许作废',value:'',textType:'functionInfo',textTypeDes:'功能属性'}}},rect9:{type:'task_single',text:{text:'任务5'}, attr:{ x:384, y:528, width:100, height:50}, props:{text:{name:'text',label:'步骤名称',value:'任务5',textType:'basicInfo',textTypeDes:'基本信息'},stepType:{name:'stepType',label:'步骤类型',value:'单人审批',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'表单对象'},auditor:{name:'auditor',label:'责任人',value:'',bandGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},overpassday:{name:'overpassday',label:'超时时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},desc:{name:'desc',label:'自动完成时限(h)',value:'',textType:'personInfo',textTypeDes:'责任人信息'},ccModule:{name:'ccModule',label:'抄送人',value:'',ccGuid:'',auditorScope:'',auditorType:'',auditorRightValue:'',auditorName:'',textType:'personInfo',textTypeDes:'责任人信息'},candocmodify:{name:'candocmodify',label:'允许协商',value:'',textType:'stepInfo',textTypeDes:'功能属性'},canrollback:{name:'canrollback',label:'允许打回',value:'',textType:'stepInfo',textTypeDes:'功能属性'},cancancel:{name:'cancancel',label:'允许作废',value:'',textType:'stepInfo',textTypeDes:'功能属性'},candocnumber:{name:'candocnumber',label:'允许直接归档',value:'',textType:'stepInfo',textTypeDes:'功能属性'}}}},paths:{path10:{from:'rect1',to:'rect2', dots:[],type:'nodePath',text:{text:'TO 任务1'},textPos:{x:37,y:-4}, props:{text:{name:'text',label:'分支条件',value:'',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path11:{from:'rect2',to:'rect3', dots:[],type:'endForkPath',text:{text:'TO 分支'},textPos:{x:56,y:-1}, props:{text:{name:'text',label:'分支条件',value:'',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path12:{from:'rect3',to:'rect5', dots:[],type:'startForkPath',text:{text:'TO 任务3'},textPos:{x:24,y:-5}, props:{text:{name:'text',label:'分支条件',value:'',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path13:{from:'rect5',to:'rect7', dots:[],type:'endJoinPath',text:{text:'TO 合并'},textPos:{x:41,y:8}, props:{text:{name:'text',label:'分支条件',value:'',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path14:{from:'rect7',to:'rect9', dots:[],type:'startJoinPath',text:{text:'TO 任务5'},textPos:{x:36,y:-5}, props:{text:{name:'text',label:'分支条件',value:'',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path15:{from:'rect9',to:'rect8', dots:[],type:'nodePath',text:{text:'TO 结束'},textPos:{x:32,y:0}, props:{text:{name:'text',label:'分支条件',value:'',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path16:{from:'rect3',to:'rect4', dots:[{x:244,y:232}],type:'startForkPath',text:{text:'TO 任务2'},textPos:{x:0,y:-10}, props:{text:{name:'text',label:'分支条件',value:'TO 任务2',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path17:{from:'rect4',to:'rect7', dots:[{x:242,y:435}],type:'endJoinPath',text:{text:'TO 合并'},textPos:{x:-3,y:17}, props:{text:{name:'text',label:'分支条件',value:'TO 合并',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path18:{from:'rect3',to:'rect6', dots:[{x:607,y:234}],type:'startForkPath',text:{text:'TO 任务4'},textPos:{x:0,y:-10}, props:{text:{name:'text',label:'分支条件',value:'TO 任务4',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}},path19:{from:'rect6',to:'rect7', dots:[{x:607,y:439}],type:'endJoinPath',text:{text:'TO 合并'},textPos:{x:-8,y:16}, props:{text:{name:'text',label:'分支条件',value:'TO 合并',textType:'conditionInfo',textTypeDes:'分支条件',hideValue:''}}}},props:{props:{text:{name:'processname',label:'流程名称',value:'新建流程123',processGuid:'',textType:'basicInfo',textTypeDes:'基本信息'},processkind:{name:'processkind',label:'流程分类',value:'',processKindGuid:'652112EB-2BD0-45F1-B4E4-049244F4148D',textType:'basicInfo',textTypeDes:'基本信息'},isactive:{name:'isactive',label:'是否启用',value:'true',textType:'basicInfo',textTypeDes:'基本信息'},allowautopass:{name:'allowautopass',label:'同一责任人跳过',value:'',textType:'basicInfo',textTypeDes:'基本信息'},description:{name:'description',label:'流程说明',value:'',textType:'basicInfo',textTypeDes:'基本信息'},formModule:{name:'formModule',label:'表单对象',value:'',formModuleGuid:'',bt_DomainXml:'',form_Html:'',textType:'formInfo',textTypeDes:'默认表单'},namecodingrule:{name:'namecodingrule',label:'流程标题',value:'',textType:'nameSetting',textTypeDes:'命名规则'},codecodingrule:{name:'codecodingrule',label:'流程编码',value:'',textType:'nameSetting',textTypeDes:'命名规则'},isautosave:{name:'isautosave',label:'允许自动归档',value:'',textType:'fileSetting',textTypeDes:'归档设置'},candatasave:{name:'candatasave',label:'	允许数据归档',value:'',textType:'fileSetting',textTypeDes:'归档设置'}}}})"),

                     tools: {
                         save: {
                             onclick: function (data) {

                                 alert(data);

                             }
                         }
                     }
                 });
    }
 
   
}

$(function () {
    oProcessAdd.initProcessModuleJson();
});